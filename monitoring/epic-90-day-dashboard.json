{
  "dashboard": {
    "id": "epic-90-day-plan",
    "title": "Epic 90-Day Plan: MVP ‚Üí AWESOME",
    "tags": ["postboxen", "epic", "kpi"],
    "timezone": "browser",
    "panels": [
      {
        "id": "kpi-overview",
        "title": "üéØ H√•rda m√•l (3 kritiska KPI:er)",
        "type": "stat",
        "targets": [
          {
            "expr": "increase(postboxen_meeting_time_saved_total[1h]) / increase(postboxen_meetings_total[1h])",
            "legendFormat": "Sparad tid/m√∂te (min)",
            "unit": "min"
          },
          {
            "expr": "increase(postboxen_actions_completed_48h_total[1h]) / increase(postboxen_actions_total[1h]) * 100",
            "legendFormat": "√Ötg√§rder klara inom 48h (%)",
            "unit": "percent"
          },
          {
            "expr": "increase(postboxen_citations_total[1h]) / increase(postboxen_suggestions_total[1h]) * 100",
            "legendFormat": "K√§llciterat (%)",
            "unit": "percent"
          }
        ],
        "thresholds": [
          {
            "value": 25,
            "color": "green"
          },
          {
            "value": 70,
            "color": "green"
          },
          {
            "value": 100,
            "color": "green"
          }
        ]
      },
      {
        "id": "decision-close-card",
        "title": "üìã PR #1: Decision-Close Card",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_decision_close_shown_total[5m])",
            "legendFormat": "Decision Close Cards visade"
          },
          {
            "expr": "rate(postboxen_decision_close_submitted_total[5m])",
            "legendFormat": "Decision Close Cards submitade"
          },
          {
            "expr": "rate(postboxen_task_create_ok_total[5m])",
            "legendFormat": "Tasks skapade (OK)"
          },
          {
            "expr": "rate(postboxen_task_create_fail_total[5m])",
            "legendFormat": "Tasks skapade (FAIL)"
          }
        ],
        "yAxes": [
          {
            "label": "Events per sekund",
            "min": 0
          }
        ]
      },
      {
        "id": "doc-copilot-v1",
        "title": "üìù PR #2: Doc-Copilot v1",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_doccopilot_open_total[5m])",
            "legendFormat": "Doc-Copilot √∂ppningar"
          },
          {
            "expr": "rate(postboxen_suggestion_rendered_total[5m])",
            "legendFormat": "F√∂rslag renderade"
          },
          {
            "expr": "rate(postboxen_suggestion_accepted_total[5m])",
            "legendFormat": "F√∂rslag accepterade"
          },
          {
            "expr": "rate(postboxen_suggestion_rejected_total[5m])",
            "legendFormat": "F√∂rslag avvisade"
          }
        ],
        "yAxes": [
          {
            "label": "Events per sekund",
            "min": 0
          }
        ]
      },
      {
        "id": "regwatch-push",
        "title": "üì∞ PR #3: Regwatch Push",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_regwatch_candidate_total[5m])",
            "legendFormat": "Regwatch kandidater"
          },
          {
            "expr": "rate(postboxen_regwatch_relevant_total[5m])",
            "legendFormat": "Relevanta notiser"
          },
          {
            "expr": "rate(postboxen_regwatch_postbrief_shown_total[5m])",
            "legendFormat": "Post-brief notiser"
          },
          {
            "expr": "rate(postboxen_regwatch_ctr_total[5m])",
            "legendFormat": "CTR p√• k√§lll√§nk"
          }
        ],
        "yAxes": [
          {
            "label": "Events per sekund",
            "min": 0
          }
        ]
      },
      {
        "id": "model-router",
        "title": "üîÑ PR #4: Model Router",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_router_decision_total[5m])",
            "legendFormat": "Router beslut"
          },
          {
            "expr": "rate(postboxen_budget_hit_total[5m])",
            "legendFormat": "Budget tr√§ffar"
          },
          {
            "expr": "rate(postboxen_downgrade_applied_total[5m])",
            "legendFormat": "Downgrades till√§mpade"
          },
          {
            "expr": "histogram_quantile(0.95, rate(postboxen_router_latency_bucket[5m]))",
            "legendFormat": "Router latens p95"
          }
        ],
        "yAxes": [
          {
            "label": "Events per sekund / Latens (ms)",
            "min": 0
          }
        ]
      },
      {
        "id": "degrade-mode",
        "title": "üõ°Ô∏è PR #5: Degrade Mode",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_join_attempt_total[5m])",
            "legendFormat": "Join f√∂rs√∂k"
          },
          {
            "expr": "rate(postboxen_join_fail_reason_total[5m])",
            "legendFormat": "Join fel"
          },
          {
            "expr": "rate(postboxen_degrade_mode_on_total[5m])",
            "legendFormat": "Degrade mode aktiverat"
          },
          {
            "expr": "histogram_quantile(0.95, rate(postboxen_time_to_after_recap_bucket[5m]))",
            "legendFormat": "TTA p95 (ms)"
          }
        ],
        "yAxes": [
          {
            "label": "Events per sekund / Tid (ms)",
            "min": 0
          }
        ]
      },
      {
        "id": "cost-tracking",
        "title": "üí∞ Kostnad per m√∂te",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_meeting_cost_total[1h])",
            "legendFormat": "Kostnad per m√∂te (SEK)"
          },
          {
            "expr": "rate(postboxen_tokens_used_total[1h])",
            "legendFormat": "Tokens per m√∂te"
          },
          {
            "expr": "rate(postboxen_budget_remaining_total[1h])",
            "legendFormat": "Budget kvar (SEK)"
          }
        ],
        "yAxes": [
          {
            "label": "Kostnad (SEK) / Tokens",
            "min": 0
          }
        ]
      },
      {
        "id": "error-rates",
        "title": "üö® Error Rates",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_errors_total[5m]) / rate(postboxen_requests_total[5m]) * 100",
            "legendFormat": "Error rate (%)"
          },
          {
            "expr": "rate(postboxen_decision_close_errors_total[5m])",
            "legendFormat": "Decision Close fel"
          },
          {
            "expr": "rate(postboxen_doc_copilot_errors_total[5m])",
            "legendFormat": "Doc-Copilot fel"
          },
          {
            "expr": "rate(postboxen_regwatch_errors_total[5m])",
            "legendFormat": "Regwatch fel"
          },
          {
            "expr": "rate(postboxen_router_errors_total[5m])",
            "legendFormat": "Router fel"
          },
          {
            "expr": "rate(postboxen_degrade_errors_total[5m])",
            "legendFormat": "Degrade fel"
          }
        ],
        "yAxes": [
          {
            "label": "Error rate (%) / Events per sekund",
            "min": 0
          }
        ]
      },
      {
        "id": "feature-adoption",
        "title": "üìà Feature Adoption",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(postboxen_decision_close_adoption_total[1h])",
            "legendFormat": "Decision Close adoption"
          },
          {
            "expr": "rate(postboxen_doc_copilot_adoption_total[1h])",
            "legendFormat": "Doc-Copilot adoption"
          },
          {
            "expr": "rate(postboxen_regwatch_adoption_total[1h])",
            "legendFormat": "Regwatch adoption"
          },
          {
            "expr": "rate(postboxen_model_router_adoption_total[1h])",
            "legendFormat": "Model Router adoption"
          }
        ],
        "yAxes": [
          {
            "label": "Adoption rate",
            "min": 0,
            "max": 100
          }
        ]
      },
      {
        "id": "slo-compliance",
        "title": "üéØ SLO Compliance",
        "type": "stat",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(postboxen_recap_duration_bucket[5m]))",
            "legendFormat": "Recap p95 (ms)",
            "unit": "ms"
          },
          {
            "expr": "rate(postboxen_join_success_total[5m]) / rate(postboxen_join_attempt_total[5m]) * 100",
            "legendFormat": "Join success rate (%)",
            "unit": "percent"
          },
          {
            "expr": "rate(postboxen_decision_coverage_total[1h])",
            "legendFormat": "Decision coverage (%)",
            "unit": "percent"
          }
        ],
        "thresholds": [
          {
            "value": 90000,
            "color": "green"
          },
          {
            "value": 99,
            "color": "green"
          },
          {
            "value": 100,
            "color": "green"
          }
        ]
      }
    ],
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "refresh": "30s",
    "schemaVersion": 27,
    "version": 1,
    "links": []
  }
}
